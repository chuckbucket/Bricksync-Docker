[supervisord]
nodaemon=true
logfile=/var/log/supervisor/supervisord.log ; Main supervisor log
pidfile=/var/run/supervisord.pid
user=root

[program:vncserver]
command=/app/vncserver_start.sh
autostart=true
autorestart=true ; Restart if Xtigervnc crashes
priority=10
user=appuser
environment=HOME="/home/appuser",USER="appuser",PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
stdout_logfile=/dev/stdout ; Capture Xtigervnc's stdout (though it logs to stderr mostly with -Log)
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr ; Capture Xtigervnc's stderr (where -Log sends output)
stderr_logfile_maxbytes=0

[program:novnc]
command=/usr/bin/websockify --web /usr/share/novnc/ 6901 localhost:5901
autostart=true
autorestart=true ; Restart if websockify crashes
priority=20
user=appuser
stdout_logfile=/dev/stdout ; Capture websockify's stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr ; Capture websockify's stderr
stderr_logfile_maxbytes=0

# The main supervisord.log will still exist for supervisor's own messages.
# Individual program logs are now redirected to container's stdout/stderr, easily viewable with `docker logs`.
